{% extends "base.html" %}
{% block content %}

<h1 class="page-title">Manage Jobs</h1>
<p class="subtitle">Create and manage open positions</p>

<div style="display:grid; grid-template-columns: 1fr 2fr; gap:30px;">

    <!-- ADD JOB -->
    <div class="card">
        <div class="add-job-header" onclick="toggleAddJob()">
            <h3 style="margin:0;">➕ Add New Job</h3>
            <span id="addJobIcon">▼</span>
        </div>

        <div id="addJobBody" class="add-job-body">
            <form method="POST">
                <input type="text" name="title" placeholder="Job Title" required>
                <textarea name="description" placeholder="Job Description" required></textarea>
                <input type="text" name="location" placeholder="Location" required>
                <input type="text" name="job_type" placeholder="Job Type" required>
                <button type="submit">Add Job</button>
            </form>
        </div>
    </div>

    <!-- JOBS TABLE -->
    <div class="card">
        <h3>All Jobs</h3>

        <table>
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Location</th>
                    <th>Type</th>
                    <th>Date</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
            {% for job in jobs %}
                <tr>
                    <td>{{ job.title }}</td>
                    <td>{{ job.location }}</td>
                    <td>{{ job.job_type }}</td>
                    <td>{{ job.posted_at }}</td>
                    <td>
                        <a href="/apply/{{ job.id }}">Apply</a> |
                        <a href="/edit-job/{{ job.id }}">Edit</a> |
                        <a href="/delete-job/{{ job.id }}">Delete</a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" style="text-align:center;">No jobs found</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
function toggleAddJob() {
    document.getElementById("addJobBody").classList.toggle("open");
    document.getElementById("addJobIcon").innerText =
        document.getElementById("addJobBody").classList.contains("open") ? "▲" : "▼";
}
</script>

{% endblock %}
